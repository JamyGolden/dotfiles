#!/usr/bin/env bash

SCRIPT_PATH=$HOME/.config/base16-shell/scripts
TMUX_CONF_PATH=$HOME/.tmux.conf

if [[ ! -z $1 ]]; then
  if [ -f "$SCRIPT_PATH/base16-$1.sh" ]; then

    eval "sh $SCRIPT_PATH/base16-$1.sh"

    # If tmux and the conf exists, update the base16 theme
    if [[ -f $TMUX_CONF_PATH && ! -z "$(command -v tmux)" ]]; then
      echo "Base16 theme changed to $1"
      sed --in-place --follow-symlinks "s/colors-base16\ '.*'/colors-base16\ '$1'/g" ~/.tmux.conf
      tmux source-file $TMUX_CONF_PATH
    fi
  else
    echo "$1 theme doesn't exit"
  fi
else
  ls $SCRIPT_PATH | awk '{sub(/base16-/, "")sub(/\.sh/, ""); print $0}'
fi

